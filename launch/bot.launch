<launch>
  <arg name="ns"/>

  <group ns="$(arg ns)">
    <node name="bot_cam" pkg="camera_aravis" type="camnode" output="screen" respawn="true">
      <rosparam file="$(find camera_aravis)/config/$(arg ns)/bot.yaml"/>
    </node>

    <node pkg="nodelet" type="nodelet" name="debayer" ns="bot_cam" args="standalone image_proc/debayer"/>
    <node pkg="nodelet" type="nodelet" name="rectify_mono" ns="bot_cam" args="standalone image_proc/rectify"/>
    <node pkg="nodelet" type="nodelet" name="rectify_color" ns="bot_cam" args="standalone image_proc/rectify">
      <remap from="image_mono" to="image_color"/>
      <remap from="image_rect" to="image_rect_color"/>
    </node>
    <node pkg="nodelet" type="nodelet" name="debayer" ns="bot_cam_rect" args="standalone image_proc/debayer"/>
    <rosparam file="$(find camera_aravis)/config/auv4/bot_cam_calib.yaml"/>
  </group>
  <include file="$(find camera_aravis)/launch/undistort_camera.launch">
    <arg name="vehicle_name"                value="auv4"/>
    <arg name="input_camera_name"           value="bot_cam"/>
    <arg name="calib_path"                  value="$(find camera_aravis)/config/auv4/bot_undistort_config.yaml"/>
    <arg name="scale"                       value="0.5"/>
  </include>
</launch>
